{
	"info": {
		"_postman_id": "6976743b-87e8-4690-96dc-4f8a3b43fae9",
		"name": "intime-app",
		"description": "# üïí inTime API Collection\n\nEsta cole√ß√£o cont√©m todos os endpoints da API da aplica√ß√£o **inTime**, desenvolvida como parte de um teste t√©cnico.\n\n---\n\n## ‚úÖ Autentica√ß√£o\n\nA autentica√ß√£o utiliza **Laravel Sanctum** com tokens do tipo **Bearer**.  \nO token de acesso (`access_token`) √© automaticamente extra√≠do da resposta da rota de login e salvo no ambiente do Postman por meio de script.\n\n---\n\n## ‚öôÔ∏è Vari√°veis de Ambiente\n\n- `BASE_URL`: URL base da API (ex: `http://localhost:8000/api`)\n    \n- `access_token`: Token gerado automaticamente na autentica√ß√£o e reutilizado nas demais requisi√ß√µes\n    \n\n---\n\n## üìå Grupos de Endpoints\n\n- `login` ‚Äì Autentica√ß√£o e gera√ß√£o de token\n    \n- `logout` ‚Äì Revoga√ß√£o de token\n    \n- `me` ‚Äì Atualiza√ß√£o de senha do pr√≥prio usu√°rio\n    \n- `admin/users` ‚Äì Cadastro, listagem, atualiza√ß√£o e exclus√£o de usu√°rios (apenas para administradores)\n    \n- `punches` ‚Äì Registro de pontos (entrada/sa√≠da) e relat√≥rio\n    \n- `zipcode` ‚Äì Consulta de endere√ßo pelo CEP\n    \n\n---\n\n## üß™ Testes Automatizados\n\nA rota de **login** j√° possui um script que salva o `access_token` automaticamente no ambiente, facilitando a autentica√ß√£o nas demais chamadas.\n\n---\n\n## üìä Par√¢metros do relat√≥rio de ponto (`/punches/report`)\n\nEste endpoint aceita os seguintes **query params opcionais**:\n\n| Par√¢metro | Tipo | Descri√ß√£o |\n| --- | --- | --- |\n| `from` | date | Data inicial do filtro (`YYYY-MM-DD`) |\n| `to` | date | Data final do filtro (`YYYY-MM-DD`) |\n| `user_id` | int | ID do funcion√°rio para filtrar |\n| `created_by` | int | ID do administrador que criou o registro |\n| `position` | string | Cargo do funcion√°rio |\n| `sort_by` | string | Campo de ordena√ß√£o: `user_name`, `created_at`, etc. |\n| `sort_dir` | string | Dire√ß√£o da ordena√ß√£o: `asc` ou `desc` |\n| `per_page` | int | Quantidade de itens por p√°gina (1‚Äì100) |\n| `page` | int | N√∫mero da p√°gina a ser retornada |\n\n> ‚ÑπÔ∏è Obs.: A filtragem exige a **permiss√£o FILTER_CLOCKS** no token. \n  \n\n---\n\n## üë§ Usu√°rio Padr√£o para Testes\n\nAo executar os comandos de instala√ß√£o, ser√° criado um usu√°rio administrador padr√£o para facilitar os testes iniciais:\n\n- **Email:** `admin@intime.test`\n    \n- **Senha:** `t0atr@sado`\n    \n\nEsse usu√°rio pode ser utilizado para autentica√ß√£o inicial, acessar endpoints protegidos e cadastrar novos funcion√°rios.\n\n---\n\n## üöÄ Como Usar\n\n1. Importe a collection no Postman\n    \n2. Configure o ambiente com a vari√°vel `BASE_URL`\n    \n3. Execute a rota `/login` com o usu√°rio padr√£o para obter o `access_token`\n    \n4. O token ser√° salvo automaticamente e usado nas pr√≥ximas requisi√ß√µes",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "25575786",
		"_collection_link": "https://fidelizi-3482.postman.co/workspace/New-Team-Workspace~cdccc758-5137-4d45-8120-5612b88ac715/collection/25575786-6976743b-87e8-4690-96dc-4f8a3b43fae9?action=share&source=collection_link&creator=25575786"
	},
	"item": [
		{
			"name": "üßë‚Äçüíº Admin - Gest√£o de Usu√°rios",
			"item": [
				{
					"name": "‚ûï Criar usu√°rio",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Jo√£o da Silva\",\n  \"email\": \"joao.silveaea@empresa.com\",\n  \"cpf\": \"07009715645\",\n  \"password\": \"senhaSegura123\",\n  \"position\": \"Analista de Sistemas\",\n  \"birth_date\": \"1990-05-10\",\n  \"zipcode\": \"37644400\",\n  \"street\": \"Pra√ßa da S√©\",\n  \"neighborhood\": \"S√©\",\n  \"city\": \"S√£o Paulo\",\n  \"state\": \"SP\",\n  \"number\": \"100\",\n  \"complement\": \"Bloco A\",\n  \"role\": \"employee\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{BASE_URL}}/admin/users",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"admin",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "üìã Listar usu√°rios",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/admin/users/?per_page=100&page=1&name=joao&email=joao.silva@empresa.com&position=Analista&cpf=39053344705&role=employee&birth_date_from=1990-05-01&birth_date_to=1990-05-10&created_by=1",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"admin",
								"users",
								""
							],
							"query": [
								{
									"key": "per_page",
									"value": "100",
									"description": "Quantidade da registros por p√°gina"
								},
								{
									"key": "page",
									"value": "1",
									"description": "P√°gina"
								},
								{
									"key": "name",
									"value": "joao",
									"description": "Nome"
								},
								{
									"key": "email",
									"value": "joao.silva@empresa.com",
									"description": "Email"
								},
								{
									"key": "position",
									"value": "Analista",
									"description": "Cargo"
								},
								{
									"key": "cpf",
									"value": "39053344705",
									"description": "CPF"
								},
								{
									"key": "role",
									"value": "employee",
									"description": "N√≠vel Usu√°rio (admin e employee)"
								},
								{
									"key": "birth_date_from",
									"value": "1990-05-01",
									"description": "Data de nascimento inicial"
								},
								{
									"key": "birth_date_to",
									"value": "1990-05-10",
									"description": "Data de nascimento Final"
								},
								{
									"key": "created_by",
									"value": "1",
									"description": "ID Admin"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "‚úèÔ∏è Atualizar usu√°rio",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Jo√£o da Silva\",\n  \"email\": \"joao.silva@empresa.com\",\n  \"cpf\": \"10717222802\",\n  \"password\": \"senhaSegura123\",\n  \"position\": \"Analista de Sistemas\",\n  \"birth_date\": \"1990-05-10\",\n  \"zipcode\": \"37644400\",\n  \"street\": \"Pra√ßa da S√©\",\n  \"neighborhood\": \"S√©\",\n  \"city\": \"S√£o Paulo\",\n  \"state\": \"SP\",\n  \"number\": \"100\",\n  \"complement\": \"Bloco A\",\n  \"role\": \"admin\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{BASE_URL}}/admin/users/{id}",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"admin",
								"users",
								"{id}"
							]
						},
						"description": "`PUT /admin/users/{id}`\n\nAtualiza os dados de um usu√°rio existente."
					},
					"response": []
				},
				{
					"name": "üßæ Detalhar usu√°rio",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/admin/users/{id}",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"admin",
								"users",
								"{id}"
							]
						},
						"description": "`GET /admin/users/{id}`\n\nExibe os dados de um usu√°rio espec√≠fico pelo ID."
					},
					"response": []
				},
				{
					"name": "‚ùå Deletar usu√°rio",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/admin/users/{id}",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"admin",
								"users",
								"{id}"
							]
						},
						"description": "`DELETE /admin/users/{id}`\n\nRemove um usu√°rio do sistema."
					},
					"response": []
				},
				{
					"name": "üîë Atualizar senha",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"let response = pm.response.json();",
									"let token = response.data?.access_token;",
									"",
									"if (token) {",
									"    pm.environment.set(\"access_token\", token);",
									"    console.log(\"Access token salvo:\", token);",
									"} else {",
									"    console.warn(\"Token n√£o encontrado na resposta.\");",
									"}",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"new_password\": \"senhaSegura123\",\n    \"new_password_confirmation\": \"senhaSegura123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{BASE_URL}}/admin/users/{id}/password",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"admin",
								"users",
								"{id}",
								"password"
							]
						},
						"description": "`PATCH /admin/users/{id}/password`\n\nAtualiza a senha do usu√°rio autenticado."
					},
					"response": []
				}
			],
			"description": "Grupo de rotas protegidas com ability `MANAGE_EMPLOYEES`, acess√≠veis apenas por administradores.\n\nPermite cadastrar, editar, excluir e visualizar usu√°rios (funcion√°rios), al√©m de redefinir senhas."
		},
		{
			"name": "üïê Punches (Registros de Ponto)",
			"item": [
				{
					"name": "üïò Bater ponto",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/punches/clock-in",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"punches",
								"clock-in"
							]
						},
						"description": "Registra o hor√°rio de entrada do usu√°rio autenticado."
					},
					"response": []
				},
				{
					"name": "üõ†Ô∏è Inserir ponto manual",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"user_id\": 1,\n    \"type\": \"in\",\n    \"punched_at\": \"2025-06-06 23:00\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{BASE_URL}}/punches/manual",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"punches",
								"manual"
							]
						},
						"description": "Permite que um admin registre um ponto manual."
					},
					"response": []
				},
				{
					"name": "üóÇÔ∏è Relat√≥rio de Registros de Ponto",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/punches/report",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"punches",
								"report"
							],
							"query": [
								{
									"key": "from",
									"value": "2025-06-05",
									"description": "Data inicial do filtro (YYYY-MM-DD)\n",
									"disabled": true
								},
								{
									"key": "to",
									"value": "2025-06-06",
									"description": "Data final do filtro (YYYY-MM-DD)\n\n\n\n\n\n\n",
									"disabled": true
								},
								{
									"key": "created_by",
									"value": "1",
									"description": "ID do administrador que criou o registro\n\n\n\n\n\n\n",
									"disabled": true
								},
								{
									"key": "user_id",
									"value": "2",
									"description": "ID do funcion√°rio para filtrar\n\n\n\n\n\n\n",
									"disabled": true
								},
								{
									"key": "position",
									"value": "Suporte",
									"description": "Cargo do funcion√°rio\n\n\n\n\n\n\n",
									"disabled": true
								},
								{
									"key": "sort_dir",
									"value": null,
									"description": "Dire√ß√£o da ordena√ß√£o: asc ou desc\n\n\n\n\n",
									"disabled": true
								},
								{
									"key": "sort_by",
									"value": null,
									"description": " Campo de ordena√ß√£o: `punched_at`, `employee_name`, `employee_position`, `employee_age`, `manager_name` |\n",
									"disabled": true
								},
								{
									"key": "per_page",
									"value": null,
									"description": "Quantidade de itens por p√°gina (1‚Äì100)\n\n\n\n\n\n\n",
									"disabled": true
								},
								{
									"key": "page",
									"value": null,
									"description": "N√∫mero da p√°gina a ser retornada\n\n\n\n\n\n\n",
									"disabled": true
								}
							]
						},
						"description": "Este endpoint permite gerar relat√≥rios personalizados de registros de ponto (entrada e sa√≠da) com diversos filtros opcionais, como datas, funcion√°rio, gestor, cargo e ordena√ß√£o.  \n  \nA resposta √© paginada e pode ser customizada conforme os par√¢metros enviados.\n\n> \n\nüîê Requer permiss√£o `VIEW_ALL_CLOCKS`. Para aplicar filtros espec√≠ficos, √© necess√°rio tamb√©m possuir a permiss√£o `FILTER_CLOCKS`."
					},
					"response": []
				},
				{
					"name": "üßæ Atualizar ponto",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"user_id\": 1,\n    \"type\": \"in\",\n    \"punched_at\": \"2025-06-06 23:00\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{BASE_URL}}/punches/{id}",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"punches",
								"{id}"
							]
						},
						"description": "Atualiza um ponto existente pelo ID."
					},
					"response": []
				},
				{
					"name": "‚ùå Excluir ponto",
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"user_id\": 1,\n    \"type\": \"in\",\n    \"punched_at\": \"2025-06-06 23:00\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{BASE_URL}}/punches/{id}",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"punches",
								"{id}"
							]
						},
						"description": "Remove um ponto registrado."
					},
					"response": []
				}
			],
			"description": "Rotas relacionadas ao registro de ponto (entrada/sa√≠da) de funcion√°rios.\n\nInclui:\n\n- Registro manual (admin)\n    \n- Atualiza√ß√£o ou exclus√£o de registros (admin)\n    \n- Registro pr√≥prio (funcion√°rio) com ability `CLOCK_IN`\n    \n- Relat√≥rio de registros com ability `VIEW_ALL_CLOCKS`"
		},
		{
			"name": "üë§ Me",
			"item": [
				{
					"name": "üîë Atualizar senha",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"let response = pm.response.json();",
									"let token = response.data?.access_token;",
									"",
									"if (token) {",
									"    pm.environment.set(\"access_token\", token);",
									"    console.log(\"Access token salvo:\", token);",
									"} else {",
									"    console.warn(\"Token n√£o encontrado na resposta.\");",
									"}",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"current_password\": \"senhaSegura123\",\n    \"new_password\": \"senhaSegura123\",\n    \"new_password_confirmation\": \"senhaSegura123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{BASE_URL}}/me/password",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"me",
								"password"
							]
						},
						"description": "Permite que o usu√°rio logado atualize sua pr√≥pria senha de forma segura.\n\nRequer autentica√ß√£o com Bearer Token e a ability `UPDATE_PASSWORD`."
					},
					"response": []
				}
			],
			"description": "Permite que o usu√°rio logado atualize sua pr√≥pria senha de forma segura.\n\nRequer autentica√ß√£o com Bearer Token e a ability `UPDATE_PASSWORD`."
		},
		{
			"name": "ZipCode",
			"item": [
				{
					"name": "üîç Consultar CEP",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/zipcode/{zipcode}",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"zipcode",
								"{zipcode}"
							]
						},
						"description": "Consulta informa√ß√µes de endere√ßo a partir de um CEP. Os dados s√£o cacheados para evitar m√∫ltiplas chamadas √† API externa."
					},
					"response": []
				}
			],
			"description": "Consulta um CEP (c√≥digo postal) e retorna os dados de endere√ßo utilizando uma API externa.\n\nRequer autentica√ß√£o com token."
		},
		{
			"name": "üîê Login",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"let response = pm.response.json();",
							"let token = response.data?.access_token;",
							"",
							"if (token) {",
							"    pm.environment.set(\"access_token\", token);",
							"    console.log(\"Access token salvo:\", token);",
							"} else {",
							"    console.warn(\"Token n√£o encontrado na resposta.\");",
							"}",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"email\": \"joao.silvaaa@empresa.com\",\n    \"password\": \"senhaSegura123\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{BASE_URL}}/login",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"login"
					]
				},
				"description": "Realiza a autentica√ß√£o do usu√°rio com e-mail e senha.\n\nSe as credenciais forem v√°lidas, um token de acesso (`access_token`) √© retornado e salvo automaticamente no ambiente Postman, permitindo autentica√ß√£o nas demais rotas protegidas."
			},
			"response": []
		},
		{
			"name": "üîì Logout",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"let response = pm.response.json();",
							"let token = response.data?.access_token;",
							"",
							"if (token) {",
							"    pm.environment.set(\"access_token\", token);",
							"    console.log(\"Access token salvo:\", token);",
							"} else {",
							"    console.warn(\"Token n√£o encontrado na resposta.\");",
							"}",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"url": {
					"raw": "{{BASE_URL}}/logout",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"logout"
					]
				},
				"description": "Revoga o token de acesso atual do usu√°rio logado, encerrando a sess√£o atual.\n\nRequer autentica√ß√£o com Bearer Token."
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{access_token}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	]
}